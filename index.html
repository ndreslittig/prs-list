
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>GT Men's PRs</title>
    <style type="text/css">
    a.personLink, a.personLink:visited, a.personLink:hover {
      color:black;
    }

    .dude {
      padding:10px;
    }

    .dude:nth-child(even) {
      /*background-color:#F4F4F4;*/
    }

    .accEvent {
      margin-right:5px;
    }



    </style>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    
  </head>

  <body>
  <div class="container">

  </div>


    <script src="prObject.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">

      function tog(person) {
        //$('a.personLink').click(function() {
            console.log("fired on "+person+person)
            $('#'+person+person).toggleClass('d-none')
          //});
      }
      

      $(document).ready(function() {




        people = Object.keys(team);
        for(var i = 0; i < people.length; i++) {
          var html = '<div style="margin-top:20px; margin-bottom:20px" class="col-lg-10 col-offset-2">'
          html += '<h1><a id="'+i+'"onclick="tog(this.id); return false;" href="#" class="personLink">'+people[i]+'</a></h1>'
          var inner = team[people[i]]
          //
          html+='<div id="'+i.toString()+i.toString()+'" class="d-none">';
          html+='<div class="panel-body">';
          for(var j = 0; j < Object.keys(inner).length; j++) {
            html+='<h2>'+Object.keys(inner)[j]+'</h2>';
            html+='<table class="table">';
            html+='<thead class="thead-dark">';
            html+='<tr>';
            var accStub = {};
            // what the fuck so much for easy to read
            var events = Object.keys(inner[Object.keys(inner)[j]]);
            for(var k = 0; k < events.length; k++) {
              if(events[k].indexOf("ACC") === -1) {
                html+='<th scope="col">'+events[k]+'</th>';
              } else {
                accStub[events[k]] = "";
              }
              
            }
            html+="</tr></thead><tbody><tr>";

            for(var k = 0; k < events.length; k++) {
              // this is fucking retarded i'm so sorry to anyone reading this
              var mark = inner[Object.keys(inner)[j]][events[k]] != -1 ? inner[Object.keys(inner)[j]][events[k]] : ''
              if(events[k].indexOf("ACC") === -1) {
                html+='<td scope="col">'+mark+'</td>';
              } else {
                accStub[events[k]] = mark
              }
            }
            html+="</tr></tbody></table>";
            var accEvents = Object.keys(accStub)
            for(var k = 0; k < accEvents.length; k++) {
              html+='<button type="submit" class="btn btn-success accEvent">'+(accEvents[k].replace("ACC_", ""))+' ('+accStub[accEvents[k]]+')</button>'
            }
            
            // html+='</tbody>'
            // html+='</table>'
            
          }
          html+='</div>'
          html+='</div>'

          html += '</div>'
          $('.container').append(html)

          
        }
      });
    </script>
    
  </body>
</html>
